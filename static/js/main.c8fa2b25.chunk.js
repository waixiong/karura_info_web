(this.webpackJsonpkarura_info=this.webpackJsonpkarura_info||[]).push([[0],{494:function(t,e,n){},495:function(t,e,n){},506:function(t,e){},572:function(t,e){},579:function(t,e){},580:function(t,e){},739:function(t,e,n){"use strict";n.r(e);var a,r,i=n(2),s=n.n(i),c=n(285),o=n.n(c),u=(n(494),n(495),n(788)),l=n(444),p=n(1),h=n(16),m=n.n(h),b=n(193),d=n(26),f=n(38),v=n(119),j=n(3),k=n(6),y=function(){function t(e,n,a){Object(j.a)(this,t),this.id=void 0,this.timestamp=void 0,this.number=void 0,this.id=e||"",this.timestamp=n||0,this.number=a||0}return Object(k.a)(t,null,[{key:"fromJson",value:function(e){return new t(e.id,Date.parse(e.timestamp+"Z"),e.number)}}]),t}(),g=function(){function t(){Object(j.a)(this,t),this.id=void 0,this.blockNumber=void 0,this.block=void 0,this.currency=void 0,this.amount=void 0,this.startAmount=void 0,this.endAmount=void 0,this.id="",this.blockNumber=0,this.currency=[],this.amount=[],this.startAmount=BigInt(0),this.endAmount=BigInt(0)}return Object(k.a)(t,null,[{key:"fromJson",value:function(e){var n,a=new t;if(a.id=e.id,a.blockNumber=e.blockNumber,a.block=y.fromJson(e.block),4===e.data.length){n=JSON.parse(e.data[1].value),a.currency=[];var r,i=Object(f.a)(n);try{for(i.s();!(r=i.n()).done;){var s=r.value;a.currency.push(s.token)}}catch(m){i.e(m)}finally{i.f()}a.startAmount=BigInt(e.data[2].value),a.endAmount=BigInt(e.data[3].value),a.amount=[a.startAmount,a.endAmount]}else{n=JSON.parse(e.data[1].value),a.currency=[];var c,o=Object(f.a)(n);try{for(o.s();!(c=o.n()).done;){s=c.value;a.currency.push(s.token)}}catch(m){o.e(m)}finally{o.f()}a.amount=[];var u,l=JSON.parse(e.data[2].value),p=Object(f.a)(l);try{for(p.s();!(u=p.n()).done;){var h=u.value;a.amount.push(h)}}catch(m){p.e(m)}finally{p.f()}a.startAmount=a.amount[0],a.endAmount=a.amount[a.amount.length-1]}return a}}]),t}(),O=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(j.a)(this,t),this.pair=void 0,this.rawSwaps=void 0,this.volumeNative=0,this.volumeUSD=0,this.liquidityNative=0,this.liquidityUSD=0,this.date=void 0,this.lastBlockNumber=void 0,this.pair=e,this.rawSwaps=n,this.date="",this.lastBlockNumber=0}return Object(k.a)(t,[{key:"token0",get:function(){return this.pair.split("-")[0]}},{key:"token1",get:function(){return this.pair.split("-")[1]}}]),t}(),x=function t(e){Object(j.a)(this,t),this.id=void 0,this.blockNumber=void 0,this.block=void 0,this.fromCurrency=void 0,this.fromAmount=void 0,this.toCurrency=void 0,this.toAmount=void 0,this.id=e.id,this.blockNumber=e.blockNumber,this.block=e.block,this.fromAmount=e.fromAmount,this.fromCurrency=e.fromCurrency,this.toAmount=e.toAmount,this.toCurrency=e.toCurrency},w=function t(e,n,a){Object(j.a)(this,t),this.pair=void 0,this.data24h=void 0,this.dataByDays=void 0,this.pair=e,this.data24h=n,this.dataByDays=a},N="KSM",S={KAR:{KSM:"KAR-KSM"},KUSD:{KSM:"KUSD-KSM"},KSM:{KAR:"KAR-KSM",KUSD:"KUSD-KSM"}};function T(t){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(m.a.mark((function t(e){var n,r,i,s,c,o,u,l,p=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:0,r=p.length>2&&void 0!==p[2]?p[2]:"https://api.subquery.network/sq/AcalaNetwork/karura",t.next=4,Object(v.request)(r,Object(v.gql)(a||(a=Object(b.a)(["\n            query {\n                events (\n                    first: ","\n                    offset: ",'\n                    orderBy: BLOCK_NUMBER_DESC\n                    filter: {\n                        method: { equalTo: "Swap" }\n                    }\n                ) {\n                    nodes {\n                        id\n                        method\n                        data\n                        blockNumber\n                        block {\n                            id\n                            timestamp\n                            number\n                        }\n                    }\n                }\n            }\n        '])),e,n));case 4:i=t.sent,s=i.events.nodes,c=[],o=Object(f.a)(s);try{for(o.s();!(u=o.n()).done;)l=u.value,c.push(g.fromJson(l))}catch(h){o.e(h)}finally{o.f()}return t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(t){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(m.a.mark((function t(e){var n,a,i,s,c,o,u,l=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"https://api.subquery.network/sq/AcalaNetwork/karura",t.next=3,Object(v.request)(n,Object(v.gql)(r||(r=Object(b.a)(['\n            query {\n                events (\n                    orderBy: BLOCK_NUMBER_DESC\n                    filter: {\n                        method: { equalTo: "Swap" }\n                        blockNumber: { greaterThan: "','" }\n                    }\n                ) {\n                    nodes {\n                        id\n                        method\n                        data\n                        blockNumber\n                        block {\n                            id\n                            timestamp\n                            number\n                        }\n                    }\n                }\n            }\n        '])),e));case 3:a=t.sent,i=a.events.nodes,s=[],c=Object(f.a)(i);try{for(c.s();!(o=c.n()).done;)u=o.value,s.push(g.fromJson(u))}catch(p){c.e(p)}finally{c.f()}return t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var q,B=n(13);n(789),n(785),n(431),n(438);function M(t){return t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),t}function K(t){return t.setUTCHours(23),t.setUTCMinutes(59),t.setUTCSeconds(59),t.setUTCMilliseconds(999),t}function U(){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(m.a.mark((function t(){var e,n,a,r,i,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=new Date).setHours(e.getHours()-24),t.next=4,Z();case 4:return t.t0=t.sent.number,n=t.t0-7300,t.next=8,A(n,"https://api.polkawallet.io/karura-subql");case 8:a=t.sent,r=a[a.length-1].block.timestamp>e.getTime();case 10:if(!r){t.next=18;break}return t.next=13,T(100,a.length,"https://api.polkawallet.io/karura-subql");case 13:i=t.sent,a.push.apply(a,Object(B.a)(i)),r=a[a.length-1].block.timestamp>e.getTime(),t.next=10;break;case 18:s=a.length-1;case 19:if(!(s>=0)){t.next=28;break}if(!(a[s].block.timestamp<e.getTime())){t.next=24;break}a.pop(),t.next=25;break;case 24:return t.abrupt("break",28);case 25:s--,t.next=19;break;case 28:return t.abrupt("return",a);case 29:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(t){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(m.a.mark((function t(e){var n,a,r,i,s,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==e&&(e=M(new Date)).setUTCDate(e.getUTCDate()-6),n=(new Date).getTime()-e.getTime(),t.next=4,Z();case 4:return t.t0=t.sent.number,t.t1=n/12e3+100,a=t.t0-t.t1,t.next=9,A(a,"https://api.polkawallet.io/karura-subql");case 9:r=t.sent,i=r[r.length-1].block.timestamp>e.getTime();case 11:if(!i){t.next=19;break}return t.next=14,T(100,r.length,"https://api.polkawallet.io/karura-subql");case 14:s=t.sent,r.push.apply(r,Object(B.a)(s)),i=r[r.length-1].block.timestamp>e.getTime(),t.next=11;break;case 19:c=r.length-1;case 20:if(!(c>=0)){t.next=29;break}if(!(r[c].block.timestamp<e.getTime())){t.next=25;break}r.pop(),t.next=26;break;case 25:return t.abrupt("break",29);case 26:c--,t.next=20;break;case 29:return t.abrupt("return",r);case 30:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){for(var e=[[]],n=K(new Date(t[t.length-1].block.timestamp)).getTime();t.length>0;){var a=t.pop();a.block.timestamp>n&&(e.push([]),n=K(new Date(a.block.timestamp)).getTime()),e[e.length-1].push(a)}return e}function F(t){var e,n=[],a=0,r=Object(f.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.currency.length>2&&2===i.amount.length)a++;else for(var s=0;s<i.currency.length-1;s++){var c=new x({id:i.id,block:i.block,blockNumber:i.blockNumber,fromCurrency:i.currency[s],toCurrency:i.currency[s+1],fromAmount:i.amount[s],toAmount:i.amount[s+1]});n.push(c)}}}catch(o){r.e(o)}finally{r.f()}return[n,a]}function I(t){var e,n=new Map,a=Object(f.a)(t);try{for(a.s();!(e=a.n()).done;){var r=e.value,i=S[r.fromCurrency][r.toCurrency];n.has(i)||n.set(i,new O(i)),n.get(i).rawSwaps.push(r)}}catch(s){a.e(s)}finally{a.f()}return n.forEach((function(e,n){e.date=M(new Date(t[0].block.timestamp)).toUTCString(),e.lastBlockNumber=t[0].blockNumber})),n}function V(t){var e,n=Object(f.a)(t.rawSwaps);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(t.token0===N||t.token1===N)if(a.fromCurrency===N){var r=Number(a.fromAmount)/1e12;t.volumeNative+=r}else{r=Number(a.toAmount)/1e12/.997;t.volumeNative+=r}}}catch(i){n.e(i)}finally{n.f()}}function _(){return H.apply(this,arguments)}function H(){return(H=Object(d.a)(m.a.mark((function t(){var e,n,a,r,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U();case 2:return e=t.sent,n=F(e),a=Object(p.a)(n,2),r=a[0],a[1],(i=I(r)).forEach((function(t,e){V(t)})),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(){return z.apply(this,arguments)}function z(){return(z=Object(d.a)(m.a.mark((function t(){var e,n,a,r,i,s,c,o,u,l,h;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z();case 2:return e=t.sent.timestamp,(n=M(new Date(e))).setUTCDate(n.getUTCDate()-6),t.next=7,J(n);case 7:a=t.sent,r=R(a),i=new Map,s=Object(f.a)(r);try{for(s.s();!(c=s.n()).done;)o=c.value,u=F(o),l=Object(p.a)(u,2),h=l[0],l[1],I(h).forEach((function(t,e){var n;i.has(e)||i.set(e,[]),V(t),null===(n=i.get(e))||void 0===n||n.push(t)}))}catch(m){s.e(m)}finally{s.f()}return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(m.a.mark((function t(){var e,n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y();case 2:return e=t.sent,t.next=5,_();case 5:return n=t.sent,a=[],n.forEach((function(t,n){var r;a.push(new w(n,t,null!==(r=e.get(n))&&void 0!==r?r:[]))})),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(){return Q.apply(this,arguments)}function Q(){return(Q=Object(d.a)(m.a.mark((function t(){var e,n,a,r,i=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:"https://api.subquery.network/sq/AcalaNetwork/karura",t.next=3,Object(v.request)(e,Object(v.gql)(q||(q=Object(b.a)(["\n            query {\n                blocks (\n                    orderBy: NUMBER_DESC\n                    first: 1\n                ) {\n                    nodes {\n                        id\n                        number\n                        timestamp\n                    }\n                }\n            }\n        "]))));case 3:return n=t.sent,a=n.blocks.nodes,r=a[0],t.abrupt("return",y.fromJson(r));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var W=n(790);var X=n(776),$=n(446),tt=n.n($),et=n(793),nt=n(747),at=n(777),rt=n(786),it=n(792),st=n(202),ct=n(464),ot=n(462),ut=Object(ot.a)({palette:{type:"dark",primary:{light:"#e40c5b",main:"#e40c5b",dark:"#e40c5b",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"}}}),lt=n(27),pt=Object(X.a)((function(t){return{displayContent:{display:"flex",flexDirection:"column","& > *":{margin:t.spacing(1),width:t.spacing(80),height:t.spacing(32)}},paperCard:{"& > *":{margin:t.spacing(1)}},syncTitle:{"& > *":{margin:t.spacing(0)}},smallTitle:{fontSize:12},smallValue:{fontSize:20}}}));function ht(){var t=pt(),e=Object(W.a)("lastBlock",Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Z("https://api.polkawallet.io/karura-subql"));case 1:case"end":return t.stop()}}),t)})))),n=e.isLoading,a=e.error,r=e.data;return n?"Loading...":a?"An error has occurred: "+a.message:Object(lt.jsxs)("div",{className:t.syncTitle,children:[Object(lt.jsxs)("p",{children:["Sync At Block ",Object(lt.jsx)("strong",{children:r.number})]}),Object(lt.jsx)("p",{className:t.smallTitle,children:new Date(r.timestamp).toUTCString()})]})}function mt(){var t=pt(),e=Object(W.a)("liquidityData",Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",G());case 1:case"end":return t.stop()}}),t)})))),n=e.isLoading,a=e.error,r=e.data;return n?"Loading...":a?"An error has occurred: "+a.message:Object(lt.jsx)(et.a,{className:t.displayContent,children:r.map((function(t,e){return Object(lt.jsx)(bt,{pool:t},t.pair)}))})}function bt(t){var e=t.pool,n=pt(),a=Object(i.useState)(void 0),r=Object(p.a)(a,2),s=r[0],c=r[1],o=Object(i.useState)(void 0),u=Object(p.a)(o,2),l=u[0],h=u[1];return Object(lt.jsx)(nt.a,{elevation:0,children:Object(lt.jsxs)(at.a,{container:!0,spacing:3,children:[Object(lt.jsxs)(at.a,{item:!0,xs:4,children:[Object(lt.jsx)(rt.a,{p:1,pt:1,children:e.pair}),Object(lt.jsx)(rt.a,{pl:1,pt:1,className:n.smallTitle,children:"TVL"}),Object(lt.jsx)(rt.a,{pl:1,pb:1,className:n.smallValue,children:"not ready"}),Object(lt.jsx)(rt.a,{pl:1,pt:1,className:n.smallTitle,children:"24h Volume"}),Object(lt.jsxs)(rt.a,{pl:1,pb:1,className:n.smallValue,children:[e.data24h.volumeNative.toFixed(3)," KSM"]}),Object(lt.jsx)(rt.a,{pl:1,pt:1,className:n.smallTitle,children:"24h Fees"}),Object(lt.jsxs)(rt.a,{pl:1,pb:1,className:n.smallValue,children:[(.003*e.data24h.volumeNative).toFixed(3)," KSM"]}),Object(lt.jsx)(rt.a,{pl:1,pt:1,className:n.smallTitle,children:l}),Object(lt.jsx)(rt.a,{pl:1,pb:1,className:n.smallValue,children:s})]}),Object(lt.jsx)(at.a,{item:!0,xs:8,children:Object(lt.jsxs)(it.a,{width:444,height:256,data:e.dataByDays,margin:{top:5,right:30,left:20,bottom:5},onMouseLeave:function(){c(void 0),h(void 0)},children:[Object(lt.jsx)(st.a,{cursor:{fill:ut.bg2},contentStyle:{display:"none"},formatter:function(t,e,n){c(n.payload.volumeNative.toFixed(3)+" KSM"),h(tt()(n.payload.date).format("MMM D, YYYY"))}}),Object(lt.jsx)(ct.a,{dataKey:"volumeNative",fill:ut.palette.primary.main})]})})]})})}var dt=n(781),ft=n(782),vt=n(783),jt=n(784),kt=new u.a,yt=Object(X.a)((function(t){return{appBar:{flexGrow:1,position:"fixed"},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1},topRight:{alignContent:"right"},displayContent:{display:"flex",flexDirection:"column","& > *":{margin:t.spacing(1),width:t.spacing(80),height:t.spacing(32)}},display:{"& > *":{margin:t.spacing(1)}}}}));var gt=function(){return Object(lt.jsx)(dt.a,{theme:ut,children:Object(lt.jsx)("div",{className:"App-background",children:Object(lt.jsxs)(l.a,{client:kt,children:[Object(lt.jsx)(Ot,{}),Object(lt.jsx)("div",{className:"App",children:Object(lt.jsx)(mt,{})})]})})})};function Ot(){var t=yt();return Object(lt.jsx)(ft.a,{className:t.appBar,children:Object(lt.jsxs)(vt.a,{children:[Object(lt.jsx)(jt.a,{variant:"h6",className:t.title,children:"Karura Info"}),Object(lt.jsx)(jt.a,{variant:"h6",className:t.topRight,children:Object(lt.jsx)(ht,{})})]})})}var xt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,794)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,s=e.getTTFB;n(t),a(t),r(t),i(t),s(t)}))};o.a.render(Object(lt.jsx)(s.a.StrictMode,{children:Object(lt.jsx)(gt,{})}),document.getElementById("root")),xt()}},[[739,1,2]]]);
//# sourceMappingURL=main.c8fa2b25.chunk.js.map